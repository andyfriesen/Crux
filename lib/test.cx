type Test = {
  name: String,
  fn: fun() -> ()
}

// TODO: we are not sound under mutability yet, so add an
// explicit annotation
let tests: mutable [Test] = mutable []

export fun test(name: String, fn) {
  tests->append({
    name: name,
    fn: fn,
  })
}

export fun run() {
  for t in tests->freeze() {
    print("test: " + t.name)
    t.fn()
  }
  print("\x1b[0;32mpass ✔️\x1b[0m")
}
